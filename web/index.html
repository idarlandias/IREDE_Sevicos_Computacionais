<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- SEO Meta Tags -->
    <title>Cloud Architecture Portfolio | Docker & Google Cloud Run</title>
    <meta name="description" content="Projeto Integrador demonstrando arquitetura cloud-native com Docker, FastAPI, Nginx e deploy automatizado no Google Cloud Run." />
    <meta name="keywords" content="Docker, Cloud Run, FastAPI, CI/CD, GitHub Actions, DevOps, MicrosserviÃ§os" />
    <meta name="author" content="Idarlan Dias" />
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Cloud Architecture Portfolio" />
    <meta property="og:description" content="ImplementaÃ§Ã£o de microsserviÃ§os containerizados com deployment contÃ­nuo no Google Cloud Run." />
    <meta property="og:url" content="https://portfolio-docker-cloudrun-728889819893.us-central1.run.app" />
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ³</text></svg>" />
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet" />
    
    <!-- Styles -->
    <link rel="stylesheet" href="style.css?v=3" />
  </head>
  <body>
    <div class="background-globes">
      <div class="globe globe-1"></div>
      <div class="globe globe-2"></div>
    </div>

    <main class="container">
      <header>
        <div class="badge">Projeto Integrador</div>
        <h1>Arquitetura Cloud & Docker</h1>
        <p>
          ImplementaÃ§Ã£o de microsserviÃ§os containerizados com deployment
          contÃ­nuo no Google Cloud Run.
        </p>
      </header>

      <section class="grid-cards">
        <div class="card">
          <div class="icon">ğŸ³</div>
          <h3>Dockerfile</h3>
          <p>
            Container Ãºnico otimizado rodando Nginx (Reverse Proxy) e FastAPI
            simultaneamente.
          </p>
        </div>
        <div class="card">
          <div class="icon">ğŸ•¸ï¸</div>
          <h3>Docker Compose</h3>
          <p>
            Ambiente de desenvolvimento local simulando redes, volumes
            persistentes e mÃºltiplas instÃ¢ncias.
          </p>
        </div>
        <div class="card">
          <div class="icon">â˜ï¸</div>
          <h3>Google Cloud Run</h3>
          <p>
            Deploy Serverless com escalabilidade automÃ¡tica e gerenciamento de
            infraestrutura (PaaS).
          </p>
        </div>
        <div class="card">
          <div class="icon">ğŸš€</div>
          <h3>CI/CD Pipeline</h3>
          <p>
            AutomaÃ§Ã£o completa com GitHub Actions: Build &rarr; Push Artifact
            Registry &rarr; Deploy.
          </p>
        </div>
      </section>

      <section class="status-panel">
        <div class="panel-header">
          <h2>System Status</h2>
          <div class="status-indicator status-loading" id="connection-status">
            <span class="dot"></span> <span id="status-text">Conectando...</span>
          </div>
        </div>

        <div class="metrics-grid">
          <div class="metric">
            <span class="label">VersÃ£o</span>
            <span class="value" id="api-version"><span class="skeleton skeleton-text"></span></span>
          </div>
          <div class="metric">
            <span class="label">Uptime</span>
            <span class="value" id="api-uptime"><span class="skeleton skeleton-text"></span></span>
          </div>
          <div class="metric">
            <span class="label">Ambiente</span>
            <span class="value" id="api-env"><span class="skeleton skeleton-text"></span></span>
          </div>
          <div class="metric highlight">
            <span class="label">Visitas Totais</span>
            <span class="value" id="api-visits"><span class="skeleton skeleton-text"></span></span>
          </div>
        </div>

        <button id="refresh-btn" class="btn-primary">
          <span class="btn-icon">â†»</span> Atualizar Dados
        </button>
        <p class="last-updated">
          Ãšltima atualizaÃ§Ã£o: <span id="last-update-time">--</span>
        </p>

        <!-- Persistence Section -->
        <div class="section-divider persistence-section">
          <h3>ğŸ“œ PersistÃªncia de Dados (Volume)</h3>
          <p class="persistence-description">
            DemonstraÃ§Ã£o de gravaÃ§Ã£o em arquivo JSON local (/data/visitas.json).
          </p>
          <div class="form-row">
            <input type="text" id="visitor-name" class="input-dark" placeholder="Seu nome..." />
            <button id="register-btn" class="btn-primary btn-success">
              Gravar Visita
            </button>
          </div>
          <div id="visits-log" class="visits-log">
            <!-- Visits will appear here -->
          </div>
        </div>

        <!-- Advanced Metrics Panel -->
        <div class="advanced-grid">
          <div>
            <h3>ğŸ“Š MÃ©tricas de Acesso</h3>
            <canvas id="visitsChart" class="chart-container"></canvas>
          </div>
          <div>
            <h3>ğŸ›¡ï¸ Logs & SeguranÃ§a</h3>
            <div class="security-section">
              <input type="password" id="auth-token" class="input-token" placeholder="Token de Acesso (ex: secret123)" />
              <div id="health-status" class="health-status">
                Health: <span style="color: gray;">Verificando...</span>
              </div>
            </div>
            <div id="realtime-logs" class="realtime-logs">
              <!-- Logs will appear here -->
              <div class="logs-placeholder">Aguardando logs...</div>
            </div>
            <button id="rollback-btn" class="btn-danger" title="Restaura a versÃ£o anterior da aplicaÃ§Ã£o em caso de falha crÃ­tica.">
              âš ï¸ Simular Rollback
            </button>
          </div>
        </div>
      </section>

      <footer class="site-footer">
        <p>Projeto Integrador - ResidÃªncia em TIC 20</p>
        <p class="footer-links">
          <a href="https://github.com/idarlandias/IREDE_Sevicos_Computacionais" target="_blank" rel="noopener">GitHub Repository</a> |
          <a href="relatorio_tecnico.pdf" target="_blank" rel="noopener">ğŸ“„ RelatÃ³rio TÃ©cnico (PDF)</a> |
          VersÃ£o: <span id="footer-version">v1.0.0</span> |
          Deploy: Google Cloud Run
        </p>
      </footer>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js?v=2"></script>
    
    <!-- Theme Toggle -->
    <button id="theme-toggle" class="theme-toggle" aria-label="Alternar tema">
      ğŸŒ™
    </button>
    
    <script>
      const updateLog = (msg) => {
        const logs = document.getElementById('realtime-logs');
        logs.innerHTML += `<div>> ${msg}</div>`;
        logs.scrollTop = logs.scrollHeight;
      };

      // Rollback Simulation
      document.getElementById('rollback-btn').addEventListener('click', async () => {
        if(confirm("Confirmar rollback para versÃ£o anterior?")) {
          try {
            const res = await fetch('/api/rollback', { method: 'POST' });
            const data = await res.json();
            alert(`Rollback iniciado: ${data.target_version}`);
            updateLog("Rollback initiated by user.");
          } catch(e) {
            alert("Erro no rollback");
          }
        }
      });

      // Theme Toggle using CSS Class
      const themeBtn = document.getElementById('theme-toggle');
      let isDark = true;

      themeBtn.addEventListener('click', () => {
        document.body.classList.toggle('light-mode');
        isDark = !isDark;
        themeBtn.textContent = isDark ? 'ğŸŒ™' : 'â˜€ï¸';
      });
    </script>
  </body>
</html>
</CodeContent>
<parameter name="EmptyFile">false
